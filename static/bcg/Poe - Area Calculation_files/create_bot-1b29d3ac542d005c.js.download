(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8775],{35614:function(e,a,l){(window.__NEXT_P=window.__NEXT_P||[]).push(["/create_bot",function(){return l(98512)}])},53387:function(e,a,l){"use strict";var n,t,i,r,o,s,d,u,m,c,g,p,_,k,b,y,f,v,S,h,F,K,w,B;l.r(a);let N={fragment:{argumentDefinitions:[n={defaultValue:null,kind:"LocalArgument",name:"apiKey"},t={defaultValue:null,kind:"LocalArgument",name:"apiUrl"},i={defaultValue:null,kind:"LocalArgument",name:"baseBotId"},r={defaultValue:null,kind:"LocalArgument",name:"customMessageLimit"},o={defaultValue:null,kind:"LocalArgument",name:"description"},s={defaultValue:null,kind:"LocalArgument",name:"displayName"},d={defaultValue:null,kind:"LocalArgument",name:"handle"},u={defaultValue:null,kind:"LocalArgument",name:"hasMarkdownRendering"},m={defaultValue:null,kind:"LocalArgument",name:"hasSuggestedReplies"},c={defaultValue:null,kind:"LocalArgument",name:"introduction"},g={defaultValue:null,kind:"LocalArgument",name:"isApiBot"},p={defaultValue:null,kind:"LocalArgument",name:"isPrivateBot"},_={defaultValue:null,kind:"LocalArgument",name:"isPromptPublic"},k={defaultValue:null,kind:"LocalArgument",name:"knowledgeSourceIds"},b={defaultValue:null,kind:"LocalArgument",name:"messagePriceCc"},y={defaultValue:null,kind:"LocalArgument",name:"model"},f={defaultValue:null,kind:"LocalArgument",name:"profilePictureUrl"},v={defaultValue:null,kind:"LocalArgument",name:"prompt"},S={defaultValue:null,kind:"LocalArgument",name:"shouldCiteSources"},h={defaultValue:null,kind:"LocalArgument",name:"temperature"}],kind:"Fragment",metadata:null,name:"CreateBotMain_poeBotCreate_Mutation",selections:[{alias:null,args:F=[{kind:"Variable",name:"apiKey",variableName:"apiKey"},{kind:"Variable",name:"apiUrl",variableName:"apiUrl"},{kind:"Variable",name:"baseBotId",variableName:"baseBotId"},{kind:"Variable",name:"customMessageLimit",variableName:"customMessageLimit"},{kind:"Variable",name:"description",variableName:"description"},{kind:"Variable",name:"displayName",variableName:"displayName"},{kind:"Variable",name:"handle",variableName:"handle"},{kind:"Variable",name:"hasMarkdownRendering",variableName:"hasMarkdownRendering"},{kind:"Variable",name:"hasSuggestedReplies",variableName:"hasSuggestedReplies"},{kind:"Variable",name:"introduction",variableName:"introduction"},{kind:"Variable",name:"isApiBot",variableName:"isApiBot"},{kind:"Variable",name:"isPrivateBot",variableName:"isPrivateBot"},{kind:"Variable",name:"isPromptPublic",variableName:"isPromptPublic"},{kind:"Variable",name:"knowledgeSourceIds",variableName:"knowledgeSourceIds"},{kind:"Variable",name:"messagePriceCc",variableName:"messagePriceCc"},{kind:"Variable",name:"model",variableName:"model"},{kind:"Variable",name:"profilePicture",variableName:"profilePictureUrl"},{kind:"Variable",name:"promptPlaintext",variableName:"prompt"},{kind:"Variable",name:"shouldCiteSources",variableName:"shouldCiteSources"},{kind:"Variable",name:"temperature",variableName:"temperature"}],concreteType:"PoeBotCreate",kind:"LinkedField",name:"poeBotCreate",plural:!1,selections:[K={alias:null,args:null,kind:"ScalarField",name:"status",storageKey:null},w={alias:null,args:null,kind:"ScalarField",name:"statusMessage",storageKey:null},{alias:null,args:null,concreteType:"Bot",kind:"LinkedField",name:"bot",plural:!1,selections:[B={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{args:null,kind:"FragmentSpread",name:"BotHeader_bot"}],storageKey:null}],storageKey:null}],type:"MutationRoot",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[y,s,d,v,_,c,o,f,t,n,g,u,m,p,h,i,r,k,b,S],kind:"Operation",name:"CreateBotMain_poeBotCreate_Mutation",selections:[{alias:null,args:F,concreteType:"PoeBotCreate",kind:"LinkedField",name:"poeBotCreate",plural:!1,selections:[K,w,{alias:null,args:null,concreteType:"Bot",kind:"LinkedField",name:"bot",plural:!1,selections:[B,{alias:null,args:null,kind:"ScalarField",name:"displayName",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isLimitedAccess",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"shouldHideLimitedAccessTag",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"deletionState",storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"image",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"localName",storageKey:null}],type:"LocalBotImage",abstractKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null}],type:"UrlBotImage",abstractKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"handle",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"canUserAccessBot",storageKey:null},{kind:"TypeDiscriminator",abstractKey:"__isNode"}],storageKey:null}],storageKey:null}]},params:{id:"384184cd2e904bb0da2ce55ad2b36fd320463e52572147f6663aa53be26cc8e7",metadata:{},name:"CreateBotMain_poeBotCreate_Mutation",operationKind:"mutation",text:null}};N.hash="ec1d0ba030bec34d0a7d1f36b78eeb1e",a.default=N},44036:function(e,a,l){"use strict";l.r(a);let n={argumentDefinitions:[{defaultValue:null,kind:"LocalArgument",name:"messageId"}],kind:"Fragment",metadata:null,name:"CreateBotMain_queryRoot",selections:[{alias:null,args:null,kind:"ScalarField",name:"randomizedAvailableBotHandle",storageKey:null},{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:"enableBotEditReminder",args:[{kind:"Literal",name:"gateName",value:"poe_web_should_show_bot_profile_edit_reminder"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_web_should_show_bot_profile_edit_reminder")'},{args:null,kind:"FragmentSpread",name:"BotInfoForm_viewer"}],storageKey:null},{alias:null,args:[{kind:"Variable",name:"messageId",variableName:"messageId"}],concreteType:"Message",kind:"LinkedField",name:"message",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"text",storageKey:null}],storageKey:null}],type:"QueryRoot",abstractKey:null};n.hash="8793d60115e1773c0ee9a303f3f6483e",a.default=n},10621:function(e,a,l){"use strict";var n,t,i;l.r(a);let r={fragment:{argumentDefinitions:n=[{defaultValue:null,kind:"LocalArgument",name:"messageId"}],kind:"Fragment",metadata:null,name:"createBotIndexPageQuery",selections:[{args:t=[{kind:"Variable",name:"messageId",variableName:"messageId"}],kind:"FragmentSpread",name:"CreateBotMain_queryRoot"}],type:"QueryRoot",abstractKey:null},kind:"Request",operation:{argumentDefinitions:n,kind:"Operation",name:"createBotIndexPageQuery",selections:[{alias:null,args:null,kind:"ScalarField",name:"randomizedAvailableBotHandle",storageKey:null},{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:"enableBotEditReminder",args:[{kind:"Literal",name:"gateName",value:"poe_web_should_show_bot_profile_edit_reminder"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_web_should_show_bot_profile_edit_reminder")'},{alias:null,args:null,concreteType:"Bot",kind:"LinkedField",name:"botsAllowedForUserCreation",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"displayName",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"model",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"allowsUserCreation",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"baseModelDisplayName",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"limitedAccessType",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"maxTokensForPrompt",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"maxTokensForIntroduction",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"modelDefaultTemperature",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"modelMaxTemperature",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"botId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"showAdvancedFieldsAsBaseBot",storageKey:null},i={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null},{alias:"enablePromptBotsPrivacySetting",args:[{kind:"Literal",name:"gateName",value:"enable_prompt_bots_privacy_setting"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"enable_prompt_bots_privacy_setting")'},{alias:"enablePromptBotCustomTemperature",args:[{kind:"Literal",name:"gateName",value:"poe_enable_prompt_bot_custom_temperature"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_enable_prompt_bot_custom_temperature")'},{alias:"decoupleBotHandleAndName",args:[{kind:"Literal",name:"gateName",value:"poe_web_enable_bot_handle_display_name_decoupling"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_web_enable_bot_handle_display_name_decoupling")'},{alias:null,args:null,kind:"ScalarField",name:"isEnrolledInRevshare",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"shouldSeeRevshareEntryPoints",storageKey:null},{alias:"showKnowledgeBaseSection",args:[{kind:"Literal",name:"gateName",value:"poe_enable_knowledge_sources"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_enable_knowledge_sources")'},{alias:"canEditMessagePrice",args:[{kind:"Literal",name:"gateName",value:"poe_revshare_message_prices"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_revshare_message_prices")'},{alias:null,args:null,kind:"ScalarField",name:"knowledgeBaseSizeLimit",storageKey:null},i],storageKey:null},{alias:null,args:t,concreteType:"Message",kind:"LinkedField",name:"message",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"text",storageKey:null},i],storageKey:null}]},params:{id:"61134731fa4e4cc9b2006b6a819f343dc91876f91a6e1cd28d49826bba79e4e7",metadata:{},name:"createBotIndexPageQuery",operationKind:"query",text:null}};r.hash="c748730d97b76d53adfe551f8d2afc22",a.default=r},98512:function(e,a,l){"use strict";l.r(a),l.d(a,{default:function(){return A}});var n,t,i=l(85893),r=l(11163),o=l(22120);l(44311);var s=l(41664),d=l.n(s),u=l(67294),m=l(22578),c=l(2197),g=l(37650),p=l(74929),_=l(80393),k=l(50530),b=l(61794),y=l(37115);(n=t||(t={})).success="success",n.handle_already_taken="handle_already_taken",n.temperature_invalid="temperature_invalid",n.api_bot_temperature_not_supported="api_bot_temperature_not_supported",n.display_name_too_long="display_name_too_long",n.display_name_empty="display_name_empty",n.other_failure="other_failure",n.invalid_knowledge_source="invalid_knowledge_source",n.bot_content_moderated="bot_content_moderated",n.introduction_exceed_token_limit="introduction_exceed_token_limit",n.prompt_exceed_token_limit="prompt_exceed_token_limit",n.knowledge_base_too_large="knowledge_base_too_large";var f=t,v=l(75704),S=l(48640),h=l(75256);let useAddBot=()=>{let{t:e}=(0,o.$G)(),[a,n]=(0,u.useState)(!1),[t]=(0,m.useMutation)(l(53387)),i=(0,c.ZP)(),s=(0,r.useRouter)(),d=(0,y.F)(),_=(0,u.useCallback)(a=>{let{baseBot:l,name:n,handle:r,prompt:o,promptIsPublic:u,introduction:m,description:_,profilePictureUrl:b,apiUrl:y,apiKey:v,isApiBot:S,hasMarkdownRendering:F,hasSuggestedReplies:K,botIsPublic:w,hasCustomTemperature:B,temperature:N,baseBotId:L,hasCustomMessageLimit:V,customMessageLimit:A,knowledgeSourcesToAdd:C,messagePrice:P,shouldCiteSources:I}=a;return new Promise((a,M)=>{let x=y?new URL(y).toString():null;if((null==C?void 0:C.some(e=>!("knowledgeSourceId"in e)&&"pending"===e.uploadPromise.state))&&!confirm(e("Some of your knowledge sources are still uploading. Are you sure you want to create this bot without them?"))){M();return}t({variables:{model:l,displayName:n,handle:r,prompt:o,isPromptPublic:u,introduction:m,description:_,profilePictureUrl:b,apiUrl:x,apiKey:v,isApiBot:S,hasMarkdownRendering:F,hasSuggestedReplies:K,isPrivateBot:void 0!==w&&!w,temperature:B?N:null,baseBotId:L,customMessageLimit:V?A:null,knowledgeSourceIds:null==C?void 0:C.map(e=>"knowledgeSourceId"in e&&e.knowledgeSourceId).filter(k.hj),messagePriceCc:P?1e4*P:null,shouldCiteSources:I},onCompleted:e=>{let{poeBotCreate:l}=e;l.status===f.success?(0,p.pE)(d)?((0,h.o)(r,l.statusMessage),a()):s.push("/".concat(r)).then(()=>{i({content:l.statusMessage,type:c.pC.success})}):(i({content:l.statusMessage,type:c.pC.error}),M())},onError:()=>{i({content:e("Create bot failed due to an unexpected error on the Poe server."),type:c.pC.error}),M()},updater:(e,a)=>{var l;(null===(l=a.poeBotCreate.bot)||void 0===l?void 0:l.id)&&(0,g.Fo)(e,a.poeBotCreate.bot.id)}})})},[t,i,s,e,d]);return{isLoading:a,addBot:(0,u.useCallback)(async e=>{let{image:a,...l}=e;try{n(!0);let e=await (0,b.W)(a);await _({...l,profilePictureUrl:e})}finally{n(!1)}},[_])}};var creation_CreateBotMain=e=>{let{queryRoot:a,defaultToApiTab:n}=e,{t}=(0,o.$G)(),{addBot:r,isLoading:s}=useAddBot(),{randomizedAvailableBotHandle:c,viewer:g,message:p}=(0,m.useFragment)(l(44036),a),k=(0,u.useMemo)(_._,[]);return(0,i.jsxs)(i.Fragment,{children:[s&&(0,i.jsx)(v.LK,{}),(0,i.jsx)(S.Z,{onSubmit:r,viewer:g,prompt:null==p?void 0:p.text,handle:c,submitText:t("Create bot"),allowSwitchingBotType:!0,isApiBot:n,apiKey:k,botVisibilityNote:t("This bot will be added to your profile and publicly visible."),disclaimer:(0,i.jsxs)(o.cC,{i18nKey:"createBotMainDisclaimer",children:["Creation and use of bots is subject to the"," ",(0,i.jsx)(d(),{href:"/tos",target:"_blank",children:"Poe Terms of Service"}),"."]}),shouldShowEditReminder:g.enableBotEditReminder,bot:null})]})},F=l(81360),K=l(42050),w=l(50515),B=l(10060),N=l(16221),L=l(38726);let V=(0,N.x)((0,B.Z)((0,L.i)(e=>{let{data:a}=e,{t:l}=(0,o.$G)(),n=(0,r.useRouter)();return(0,i.jsxs)(K.Z,{header:(0,i.jsx)(F.Z,{title:l("Create a bot")}),children:[(0,i.jsx)(w.Z,{title:l("Poe - Create a bot")}),(0,i.jsx)(creation_CreateBotMain,{queryRoot:a,defaultToApiTab:!!n.query.api||!!n.query.server})]})},{query:l(10621),variables:e=>{let a=e.prompt_message;if(!a||Array.isArray(a))return{messageId:null};let l=parseInt(a);return isNaN(l)?{messageId:null}:{messageId:l}}},{loggedInOnly:!0})));var A=V}},function(e){e.O(0,[1664,5675,6835,7536,5636,6361,6226,3258,1865,9774,2888,179],function(){return e(e.s=35614)}),_N_E=e.O()}]);