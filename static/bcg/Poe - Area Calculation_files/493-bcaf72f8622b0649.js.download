(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[493],{41677:function(e,a,t){"use strict";var n,s,r=t(67294);function _extends(){return(_extends=Object.assign?Object.assign.bind():function(e){for(var a=1;a<arguments.length;a++){var t=arguments[a];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e}).apply(this,arguments)}a.Z=function(e){return r.createElement("svg",_extends({viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},e),n||(n=r.createElement("path",{d:"m21.205 7.556-5.291-5.265A.995.995 0 0 0 15.209 2h-6.5a1 1 0 0 0-1 1v2.235h2V4h4.503v4.265a1 1 0 0 0 1 1H19.5v5.5h-1.209v2H20.5a1 1 0 0 0 1-1v-7.5a.998.998 0 0 0-.295-.709Zm-4.993-2.147 1.865 1.856h-1.865V5.409Z"})),s||(s=r.createElement("path",{d:"m15.996 12.791-5.291-5.265a1 1 0 0 0-.705-.29H3.5a1 1 0 0 0-1 1V21a1 1 0 0 0 1 1h11.791a1 1 0 0 0 1-1v-7.5a1 1 0 0 0-.295-.709Zm-4.993-2.147 1.865 1.856h-1.865v-1.856ZM4.5 20V9.235h4.503V13.5a1 1 0 0 0 1 1h4.288V20H4.5Z"})))}},99240:function(e,a,t){"use strict";var n,s,r=t(67294);function _extends(){return(_extends=Object.assign?Object.assign.bind():function(e){for(var a=1;a<arguments.length;a++){var t=arguments[a];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e}).apply(this,arguments)}a.Z=function(e){return r.createElement("svg",_extends({viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},e),n||(n=r.createElement("path",{d:"M19.5 21h-15c-.55 0-1-.45-1-1v-3c0-.55.45-1 1-1s1 .45 1 1v2h13v-2c0-.55.45-1 1-1s1 .45 1 1v3c0 .55-.45 1-1 1Z"})),s||(s=r.createElement("path",{d:"M12 16.5c-.25 0-.48-.09-.65-.24-.01-.01-.02-.01-.02-.02l-6.05-5.5a.997.997 0 1 1 1.34-1.48L11 13.24V4c0-.55.45-1 1-1s1 .45 1 1v9.23l4.38-3.97a.997.997 0 1 1 1.34 1.48l-5.98 5.43c-.18.2-.44.33-.74.33Z"})))}},97341:function(e,a,t){"use strict";var n,s=t(67294);function _extends(){return(_extends=Object.assign?Object.assign.bind():function(e){for(var a=1;a<arguments.length;a++){var t=arguments[a];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e}).apply(this,arguments)}a.Z=function(e){return s.createElement("svg",_extends({viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},e),n||(n=s.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 2a1 1 0 0 1 1 1v4a1 1 0 1 1-2 0V3a1 1 0 0 1 1-1ZM12 16a1 1 0 0 1 1 1v4a1 1 0 1 1-2 0v-4a1 1 0 0 1 1-1ZM5.293 5.293a1 1 0 0 1 1.414 0l2 2a1 1 0 0 1-1.414 1.414l-2-2a1 1 0 0 1 0-1.414ZM15.293 15.293a1 1 0 0 1 1.414 0l2 2a1 1 0 0 1-1.414 1.414l-2-2a1 1 0 0 1 0-1.414ZM2 12a1 1 0 0 1 1-1h4a1 1 0 1 1 0 2H3a1 1 0 0 1-1-1ZM16 12a1 1 0 0 1 1-1h4a1 1 0 1 1 0 2h-4a1 1 0 0 1-1-1ZM8.707 15.293a1 1 0 0 1 0 1.414l-2 2a1 1 0 0 1-1.414-1.414l2-2a1 1 0 0 1 1.414 0ZM18.707 5.293a1 1 0 0 1 0 1.414l-2 2a1 1 0 1 1-1.414-1.414l2-2a1 1 0 0 1 1.414 0Z"})))}},73496:function(e,a,t){"use strict";t.r(a);let n={argumentDefinitions:[{defaultValue:!1,kind:"LocalArgument",name:"showDescription"}],kind:"Fragment",metadata:null,name:"BotHeader_bot",selections:[{alias:null,args:null,kind:"ScalarField",name:"displayName",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isLimitedAccess",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"shouldHideLimitedAccessTag",storageKey:null},{condition:"showDescription",kind:"Condition",passingValue:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null}]},{args:null,kind:"FragmentSpread",name:"BotImage_bot"},{args:null,kind:"FragmentSpread",name:"BotLink_bot"},{args:null,kind:"FragmentSpread",name:"IdAnnotation_node"},{args:null,kind:"FragmentSpread",name:"botHelpers_useViewerCanAccessPrivateBot"},{args:null,kind:"FragmentSpread",name:"botHelpers_useDeletion_bot"}],type:"Bot",abstractKey:null};n.hash="823d90b99e55ab98fc9b85d0cab07d30",a.default=n},34122:function(e,a,t){"use strict";t.r(a);let n={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"BotHeader_viewer",selections:[{alias:null,args:null,kind:"ScalarField",name:"hasActiveSubscription",storageKey:null}],type:"Viewer",abstractKey:null};n.hash="b4fa7b95e577d1be47aa52afc4e565f8",a.default=n},33891:function(e,a,t){"use strict";t.r(a);let n={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"BotLink_bot",selections:[{alias:null,args:null,kind:"ScalarField",name:"handle",storageKey:null}],type:"Bot",abstractKey:null};n.hash="574ee5a4c6d9ba8ef15b0678164be116",a.default=n},98989:function(e,a,t){"use strict";t.r(a);let n={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"Message_bot",selections:[{alias:null,args:null,kind:"ScalarField",name:"isApiBot",storageKey:null}],type:"Bot",abstractKey:null};n.hash="7dfacd681672e42424101fb8d87e8f31",a.default=n},94864:function(e,a,t){"use strict";t.r(a);let n={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"Message_viewer",selections:[{alias:"allowImages",args:[{kind:"Literal",name:"gateName",value:"poe_allow_images"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_allow_images")'},{alias:"allowImagesForApiBots",args:[{kind:"Literal",name:"gateName",value:"poe_allow_images_for_api_bots"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_allow_images_for_api_bots")'},{alias:"enableImageViewer",args:[{kind:"Literal",name:"gateName",value:"poe_web_image_viewer"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_web_image_viewer")'},{alias:"enableMessageCitation",args:[{kind:"Literal",name:"gateName",value:"poe_message_citation_web"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_message_citation_web")'},{alias:"enableMath",args:[{kind:"Literal",name:"gateName",value:"poe_web_enable_markdown_math"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_web_enable_markdown_math")'},{alias:null,args:null,kind:"ScalarField",name:"promptBotImageDomainWhitelist",storageKey:null}],type:"Viewer",abstractKey:null};n.hash="5161690c50c5870c7c4afddcd7ca2672",a.default=n},4824:function(e,a,t){"use strict";var n=t(85893),s=t(22120),r=t(22578),o=t(65869),l=t(37650),i=t(34616),c=t(24165),d=t.n(c),u=t(47547),g=t(94639);a.Z=e=>{let a,{bot:c,viewer:m,bold:_=!1,showLimitedAccess:h=!1,linked:p=!1,botIconSize:b=36,onClick:w,className:v}=e,k=(0,r.useFragment)(t(73496),c),x=(0,r.useFragment)(t(34122),m),{t:f}=(0,s.$G)(),M=(0,l.nn)(k),{isDeleted:C}=(0,l.iZ)(k),N=C||!M,y=h&&k.isLimitedAccess&&!k.shouldHideLimitedAccessTag,B=y&&(null==x?void 0:x.hasActiveSubscription);a=C?f("Deleted"):M?B?f("Subscription access"):y?f("Limited access"):k.description:f("Private");let Z=(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(u.Z,{bot:k,size:b}),(0,n.jsxs)("div",{className:d().textContainer,children:[(0,n.jsx)("p",{children:k.displayName}),a&&(0,n.jsx)("p",{className:d().subText,children:a}),(0,n.jsx)(o.Z,{node:k})]})]}),j=(0,i.$)(_?d().boldTitle:d().title,v);return p?(0,n.jsx)(g.Z,{className:j,bot:k,"data-deleted":N||void 0,onClick:w,children:Z}):(0,n.jsx)("div",{className:j,"data-deleted":N||void 0,onClick:w,children:Z})}},94639:function(e,a,t){"use strict";var n=t(85893),s=t(41664),r=t.n(s),o=t(22578);a.Z=e=>{let{bot:a,onClick:s,children:l,className:i,...c}=e,d=(0,o.useFragment)(t(33891),a);return(0,n.jsx)(r(),{className:i,href:"/".concat(d.handle),prefetch:!1,onClick:s,...c,children:l})}},70138:function(e,a,t){"use strict";var n=t(67294);let s=n.createContext(null);a.Z=s},51844:function(e,a,t){"use strict";let n;t.d(a,{Z:function(){return message_Message}});var s,r=t(85893),o=t(41143),l=t.n(o),i=t(67294),c=t(22120),d=t(22578);function _extends(){return(_extends=Object.assign?Object.assign.bind():function(e){for(var a=1;a<arguments.length;a++){var t=arguments[a];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e}).apply(this,arguments)}t(44311);var nosign=function(e){return i.createElement("svg",_extends({viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},e),s||(s=i.createElement("path",{d:"M18.364 5.636 5.636 18.364A8.972 8.972 0 0 1 3 12a9 9 0 0 1 9-9 8.972 8.972 0 0 1 6.364 2.636Zm0 0A8.972 8.972 0 0 1 21 12a9 9 0 0 1-9 9 8.972 8.972 0 0 1-6.364-2.636L18.364 5.636Z",className:"nosign_svg__icon_svg-stroke"})))},u=t(34616),g=t(42583),m=t.n(g),_=t(85649),h=t(89083),p=t(8611);t(16719);var b=t(96906),w=t(39624),v=t(24087),k=t(1241),x=t(39257),f=t(81191),M=t.n(f),C=t(8693),N=t(58281),y=t(63236),B=t(70138),Z=t(41677),j=t(19029),I=t(50530),S=t(73494),F=t.n(S),L=t(6488),P=t(39885),T=t(69295),H=t(2197);let O=/language-(\w+)/,useLowlight=()=>{let[e,a]=(0,i.useState)(n),s=(0,i.useMemo)(()=>Promise.all([t.e(5957),t.e(125),t.e(7764),t.e(6965),t.e(1708),t.e(6563),t.e(295),t.e(4360),t.e(8967),t.e(3180),t.e(9651)]).then(t.t.bind(t,26912,23)),[]);return(0,i.useEffect)(()=>{e||s.then(e=>{a(n=e)})},[s,e]),e},useDetectLanguage=(e,a)=>{let t=useLowlight(),n=(0,i.useMemo)(()=>{let n=null==a?void 0:a.match(O);if(n)return{language:n[1].toLowerCase(),showLanguageName:!0};if(!t)return;let s=t.highlightAuto(e);return{language:s.language,showLanguageName:s.relevance>=10}},[t,e,a]);return n},PreBlock=e=>{let{languageMatch:a,code:t,...n}=e,{t:s}=(0,c.$G)(),o=(0,H.ZP)(),d=(0,i.useContext)(y.Z),u=null==d?void 0:d.botId,g=null==d?void 0:d.model,m=null==d?void 0:d.chatId,_=(0,i.useContext)(B.Z),h=null==_?void 0:_.messageId,p=(0,i.useCallback)(()=>{navigator.clipboard.writeText(t.trim()),o({content:s("Copied to clipboard"),type:H.pC.success}),d&&(l()(u,"botId is ".concat(u)),l()(m,"chatId is ".concat(m)),l()(h,"messageId is ".concat(h)),l()(g,"model is ".concat(g)),(0,j.Z)("poe/action_log",{action_type:(0,P.E)(L.Z.copy_code),bot_id:u,chat_id:m,message_id:h,model_name:g}))},[t,u,h,m,g,d,o,s]);return(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:F().codeHeader,children:[(0,r.jsx)("div",{className:F().languageName,children:(null==a?void 0:a.showLanguageName)&&a.language}),(0,r.jsxs)(T.t9,{className:F().copyButton,onClick:p,children:[(0,r.jsx)(Z.Z,{})," ",s("Copy")]})]}),(0,r.jsx)("pre",{...n,className:F().preTag})]})},CodeBlock=e=>(0,r.jsx)("code",{...e,className:F().codeTag});var message_MarkdownCodeBlock=e=>{let{className:a,children:t}=e,n=(0,I.HD)(t[0])?t[0]:"",s=useDetectLanguage(n,a),o=(0,i.useCallback)(e=>(0,r.jsx)(PreBlock,{...e,languageMatch:s,code:n}),[n,s]);return(0,r.jsx)(C.Z,{style:N.Z,className:a,PreTag:o,CodeTag:CodeBlock,...s?{language:s.language}:{},children:n})},D=t(3102),V=t(99240),A=t(97341),E=t(7700),K=t(92913),R=t.n(K);let getSrcSize=e=>{try{if(!e)return null;let a=new URL(e),t=parseInt(a.searchParams.get("w")||""),n=parseInt(a.searchParams.get("h")||"");if(Number.isNaN(t)||Number.isNaN(n))return null;return{width:t,height:n}}catch(e){return null}};var message_MarkdownImage=e=>{let{enableImageViewer:a=!1,alt:t,src:n,...s}=e,o=(0,i.useRef)(null),[l,c]=(0,E.y)(),d=(0,i.useCallback)(async()=>{n&&await l(n,t)},[n,t,l]),[g,m]=(0,i.useState)(!1),_=(0,i.useCallback)(()=>{m(!0)},[m]);(0,i.useEffect)(()=>{var e;(null===(e=o.current)||void 0===e?void 0:e.complete)&&_()},[_]);let h=getSrcSize(n),p=(0,i.useContext)(D.Z),b=(0,i.useCallback)(()=>{a&&n&&p({src:n,alt:t})},[n,t,a,p]);return(0,r.jsxs)("span",{className:R().imageContainer,children:[h?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("img",{className:(0,u.$)(R().image,R().withPlaceholder),ref:o,src:n,alt:t,...s,onLoad:_,onClick:b}),(0,r.jsx)("canvas",{height:h.height,width:h.width,className:R().placeholder})]}):(0,r.jsx)("img",{className:R().image,ref:o,src:n,alt:t,...s,onLoad:_,onClick:b}),g&&n&&(0,r.jsx)(T.Xd,{className:R().downloadImageButton,"data-downloading":c,disabled:c,onClick:c?void 0:d,icon:c?(0,r.jsx)(A.Z,{}):(0,r.jsx)(V.Z,{})})]})},G=t(76093),U=t(62394),W=t.n(U),z=t(68618);let parseInlineCitationInfo=e=>{let a="poe.com"===e.hostname,t=(0,G.Zw)(e.pathname),n=1===t.length&&"citation"===t[0],s=e.searchParams.get("message_id"),r=e.searchParams.get("citation"),o=parseInt(s||""),l=parseInt(r||""),i=a&&n&&Number.isInteger(o)&&Number.isInteger(l);return i?{messageId:o,citationIndex:l}:null},MarkdownLinkCitationInner=e=>{let{messageId:a,citationIndex:t,className:n,...s}=e,{modal:o,openModal:l}=(0,z.Z)({messageId:a,citationIndex:t});return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("a",{...s,className:(0,u.$)(n,W().linkifiedLink),onClick:l,href:void 0}),o]})};var message_MarkdownLink=e=>{let a=(0,i.useContext)(y.Z);try{var t,n;let s=null===(n=e.node)||void 0===n?void 0:null===(t=n.properties)||void 0===t?void 0:t.href;if(s){let t=new URL(s),n=parseInlineCitationInfo(t);if("poe:"===t.protocol)return(0,r.jsx)(r.Fragment,{children:e.children});if(e.enableMessageCitation&&n){if(!a)return(0,r.jsx)(r.Fragment,{children:e.children});return(0,r.jsx)(MarkdownLinkCitationInner,{...e,messageId:n.messageId,citationIndex:n.citationIndex})}}return(0,r.jsx)("a",{...e,target:"_blank"})}catch(a){return(0,r.jsx)(r.Fragment,{children:e.children})}};let getImageSrc=(e,a)=>{if(!e)return"";try{let t=new URL(e);if(["qph.fs.quoracdn.net","qph.cf2.quoracdn.net","qph.cf2.poecdn.net"].includes(t.hostname))return e;if(void 0!==a&&!a.includes(t.hostname))return"";return e}catch(e){return""}},$={code:e=>{let{inline:a,...t}=e;return a?(0,r.jsx)("code",{...t}):(0,r.jsx)(message_MarkdownCodeBlock,{...t})},pre:e=>{let{children:a}=e;return(0,r.jsx)(r.Fragment,{children:a})}},q={img:()=>null},Y=[v.Z,k.Z];var message_Markdown=e=>{let{text:a,allowImages:t=!1,enableImageViewer:n=!1,enableMessageCitation:s=!1,enableMath:o=!1,promptBotImageDomainWhiteList:l}=e,c=(0,i.useCallback)(e=>getImageSrc(e,l),[l]),d=(0,i.useMemo)(()=>({...$,a:e=>{let{...a}=e;return(0,r.jsx)(message_MarkdownLink,{className:M().link,enableMessageCitation:s,...a})},...t?{img:e=>{let{...a}=e;return(0,r.jsx)(message_MarkdownImage,{enableImageViewer:n,...a})}}:q}),[t,n,s]),u=(0,i.useMemo)(()=>[...Y,...o?[[x.Z,{singleDollarTextMath:!1}]]:[]],[o]),g=(0,i.useMemo)(()=>o?[w.Z]:void 0,[o]);return(0,r.jsx)("div",{className:M().markdownContainer,children:(0,r.jsx)(b.D,{components:d,remarkPlugins:u,rehypePlugins:g,transformImageUri:c,children:a.replace("\n\nHuman","").trim()})})};let MessageBubble=e=>{let{text:a,messageTimeoutSecs:t=15,botDisplayName:n,isBot:s,isCancelled:o=!1,isOptimistic:i,timeoutLevel:d,state:g,allowImages:_,contentType:b=h.Z.text_markdown,promptBotImageDomainWhiteList:w,enableImageViewer:v=!1,enableMessageCitation:k=!1,enableMath:x=!1,footer:f,errorMessage:M}=e,{t:C}=(0,c.$G)(),N=null,y=Math.floor(t/5);g===p.Z.error?N=s?C("Unable to reach Poe."):M||C(d<3?"Message failed to send.":"Unable to reach Poe."):g===p.Z.error_llm?(l()(n,"botDisplayName is ".concat(n)),N=C("{{botName}} ran into a problem answering your request.",{botName:n})):g===p.Z.error_user_message_too_long?N=C("This message is too long. Retry with a shorter message."):o||(i&&!s?N=C(d?d<3?"Still sending...":"Unable to reach Poe.":"Sending..."):1===d?N=C("Waiting..."):d>1&&d<y?N=C("Still waiting..."):d===y&&(l()(n,"botDisplayName is ".concat(n)),N=C("{{botName}} did not respond.",{botName:n})));let B=(0,u.$)(m().row,!s&&m().humanRow),Z=(0,u.$)(s?m().botMessageBubble:m().humanMessageBubble,(g===p.Z.error||g===p.Z.error_llm||d===y)&&m().errorBubble);return(0,r.jsxs)("div",{className:m().rowWithFooter,children:[(0,r.jsx)("div",{className:B,children:(0,r.jsxs)("div",{className:Z,children:[s&&!a?g===p.Z.incomplete?(0,r.jsx)("p",{className:m().plaintext,children:"..."}):(0,r.jsx)(nosign,{className:m().noSignIcon}):b===h.Z.text_markdown?(0,r.jsx)(message_Markdown,{text:a,allowImages:_,enableImageViewer:v,enableMessageCitation:k,enableMath:x,promptBotImageDomainWhiteList:w}):(0,r.jsx)("p",{className:m().plaintext,children:a}),f]})}),(0,r.jsx)("div",{"data-visible":i||d>0||g===p.Z.error||g===p.Z.error_llm||g===p.Z.error_user_message_too_long||void 0,className:s?m().botOptimisticFooter:m().humanOptimisticFooter,children:N})]})},BreakLine=()=>(0,r.jsx)("div",{className:m().breakLine}),ChatBreak=()=>{let{t:e}=(0,c.$G)();return(0,r.jsxs)("div",{className:m().chatBreak,children:[(0,r.jsx)(BreakLine,{}),e("Context cleared"),(0,r.jsx)(BreakLine,{})]})};var message_Message=e=>{let{text:a,author:n,messageTimeoutSecs:s,botDisplayName:o,viewer:l,bot:i,isCancelled:c=!1,isOptimistic:u=!1,timeoutLevel:g=0,state:m=p.Z.complete,contentType:b=h.Z.text_markdown,footer:w,errorMessage:v}=e,{allowImages:k,allowImagesForApiBots:x,enableImageViewer:f,enableMessageCitation:M,enableMath:C,promptBotImageDomainWhitelist:N}=(0,d.useFragment)(t(94864),l),{isApiBot:y}=(0,d.useFragment)(t(98989),i);return n===_.Z.chat_break?(0,r.jsx)(ChatBreak,{}):(0,r.jsx)(MessageBubble,{text:a,messageTimeoutSecs:s,botDisplayName:o,isBot:n!==_.Z.human,isCancelled:c,isOptimistic:u,timeoutLevel:g,state:m,allowImages:k||x&&n===_.Z.pacarana,contentType:b,promptBotImageDomainWhiteList:y?void 0:N,enableImageViewer:f,enableMessageCitation:M,enableMath:C,footer:w,errorMessage:v})}},68618:function(e,a,t){"use strict";var n=t(85893),s=t(67294),r=t(41019);let importMessageCitationSourceModal=()=>t.e(4582).then(t.bind(t,44582));a.Z=e=>{let{messageId:a,citationIndex:t}=e,[o,l]=(0,s.useState)(!1),i=(0,s.useCallback)(()=>{l(!0)},[]),c=(0,s.useCallback)(()=>{l(!1)},[]),d=(0,s.useMemo)(()=>({messageId:a,citationIndex:t}),[t,a]),u=(0,n.jsx)(r.Z,{isOpen:o,onRequestClose:c,body:importMessageCitationSourceModal,bodyProps:d,modalHeight:400,useMinHeight:!0,useIncreasedHeightInCompactScreen:!0});return{modal:u,openModal:i}}},7700:function(e,a,t){"use strict";t.d(a,{y:function(){return useDownloadImage}});var n=t(67294),s=t(22120),r=t(63236),o=t(70138),l=t(2197),i=t(19029),c=t(6488),d=t(39885),u=t(62341);let generateRandomString=e=>[...Array(e)].map(()=>(26*Math.random()|0).toString(36)).join(""),useDownloadImage=()=>{let[e,a]=(0,n.useState)(!1),t=(0,n.useContext)(o.Z),g=(0,n.useContext)(r.Z),{t:m}=(0,s.$G)(),_=(0,l.ZP)(),h=(0,n.useCallback)(()=>{_({type:l.pC.error,content:m("Failed to download image.")})},[_,m]);return[async(e,n)=>{if((0,i.Z)("poe/action_log",{action_type:(0,d.E)(c.Z.save_image),bot_id:null==g?void 0:g.botId,message_id:null==t?void 0:t.messageId,action_metadata:{image_src:e}}),e)try{a(!0);let t=await fetch(e);if(200!==t.status){(0,u.H)(Error("Failed to download image (".concat(e,"). Status code: ").concat(t.status,"."))),h();return}let s=await t.blob();if(!s||!s.type.startsWith("image")){(0,u.H)(Error("Failed to download image (".concat(e,"). Invalid image type: ").concat(null==s?void 0:s.type,"."))),h();return}let r=s.type.split("/")[1],o=URL.createObjectURL(s),l=document.createElement("a");l.href=o;let i=(null==n?void 0:n.replaceAll(/\s+/g,"_"))||"poe_"+generateRandomString(6);l.download="".concat(i,".").concat(r),document.body.appendChild(l),l.click(),document.body.removeChild(l),window.URL.revokeObjectURL(o)}finally{a(!1)}},e]}},24165:function(e){e.exports={title:"BotHeader_title__cURS_",boldTitle:"BotHeader_boldTitle__KgfYh",textContainer:"BotHeader_textContainer__kVf_I",subText:"BotHeader_subText__0Nkxq"}},57031:function(e){e.exports={endSelectionButton:"ChatPageNavbar_endSelectionButton__V5yoM",shareButton:"ChatPageNavbar_shareButton__QuaBY",noTextShareButton:"ChatPageNavbar_noTextShareButton__Y7z4N",rightNavItemWrapper:"ChatPageNavbar_rightNavItemWrapper__hlLkg",shareTextWrapper:"ChatPageNavbar_shareTextWrapper__yHoeV",shareText:"ChatPageNavbar_shareText__Gm0Zc",signUpText:"ChatPageNavbar_signUpText__wlCfd",closeIcon:"ChatPageNavbar_closeIcon__eqA3l"}},81191:function(e){e.exports={markdownContainer:"Markdown_markdownContainer__Tz3HQ",downloadImageButton:"Markdown_downloadImageButton__RCbDB"}},73494:function(e){e.exports={codeHeader:"MarkdownCodeBlock_codeHeader__zWt_V",preTag:"MarkdownCodeBlock_preTag__QMZEO",codeTag:"MarkdownCodeBlock_codeTag__5BV0Z",copyButton:"MarkdownCodeBlock_copyButton__1_hA9",languageName:"MarkdownCodeBlock_languageName__4_BF8"}},92913:function(e){e.exports={imageContainer:"MarkdownImage_imageContainer__rAeth",image:"MarkdownImage_image__3dBzJ",withPlaceholder:"MarkdownImage_withPlaceholder__SCN0A",placeholder:"MarkdownImage_placeholder__ZmySQ",downloadImageButton:"MarkdownImage_downloadImageButton__G4i1S",spin:"MarkdownImage_spin__izCcd"}},62394:function(e){e.exports={linkifiedLink:"MarkdownLink_linkifiedLink__BepcK"}},42583:function(e){e.exports={humanMessageBubble:"Message_humanMessageBubble__DtRxA",botMessageBubble:"Message_botMessageBubble__aYctV",errorBubble:"Message_errorBubble__Bl92G",breakLine:"Message_breakLine__Szhtx",chatBreak:"Message_chatBreak__WMd1Y",humanOptimisticFooter:"Message_humanOptimisticFooter__buJvs",botOptimisticFooter:"Message_botOptimisticFooter__FL0c_",row:"Message_row__ug_UU",humanRow:"Message_humanRow__5X_jz",expander:"Message_expander__5gU_H",noSignIcon:"Message_noSignIcon__11Dy5",plaintext:"Message_plaintext__sTseT",rowWithFooter:"Message_rowWithFooter__FShU6"}}}]);